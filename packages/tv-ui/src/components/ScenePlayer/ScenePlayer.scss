@import "./stash-styles.scss";

.ScenePlayer {
  .VideoPlayer {
    max-height: initial;
    padding-bottom: initial;

    &.portrait .video-wrapper {
      height: 100%; /* override stash style */
    }
  }
  
  &.hide-controls {
    .VideoPlayer {
      .vjs-control-bar > :not(.vjs-progress-control) {
        display: none;
      }
    }
  }
  
  &.hide-progress-bar {
    .VideoPlayer {
      .vjs-control-bar > .vjs-progress-control {
        display: none;
      }
    }
  }
  
  &.hide-controls:not(.hide-progress-bar) {
    .VideoPlayer {
      .vjs-control-bar > .vjs-progress-control {
        bottom: initial;
      }
    }
  }
  
  .video-js {
    &:not(.vjs-has-started):not(.vjs-using-native-controls) video {
      // The DOM order should mean that the poster is always on top if visible but there's a weird iOS bug that 
      // causes the video to appear on top of the poster when the video is over halfway off screen;
      opacity: 0;
    }
    .vjs-progress-control {
      &:has(.vjs-marker-dot:hover) .vjs-mouse-display {
        // Workaround for weird bug in videojs or marker plugin where the mouse display dot shifts a little bit to
        // the right when hovering over a marker
        translate: -4px;
      }
      .vjs-marker-dot {
        top: unset;
        transform: translate(-50%, 0);
        
        &:hover {
          transform: translate(-50%, 0) scale(1.5);
        }
      }
    }
    .vjs-current-time, .vjs-duration {
      margin-right: unset;
      margin-left: unset;
    }
    .vjs-custom-control-spacer {
      display: unset;
      flex: 1 1 auto;
    }
    /*
    We need to include this since the sourceSelector plugin expects it to exist but we don't 
    want it to be visible.
    */
    .vjs-fullscreen-control {
      display: none;
    }
    /*
    We need to include sourceSelector plugin otherwise the video does not load but we don't
    want it to be visible.
    */
    .vjs-source-selector {
      display: none;
    }
    
    // The cast button is injected by a plugin so we can't control it's dom placement but we want it to appear to the
    // right of the video duration so we use order to make duration last
    .vjs-duration {
      order: 10;
    }
  }
}